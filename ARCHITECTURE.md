# å¤šæ¨¡æ€æ•°æ®åº•åº§ - ç”Ÿäº§çº§æ¶æ„æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
2. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
3. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
4. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
5. [æ¶æ„ä¼˜åŠ¿](#æ¶æ„ä¼˜åŠ¿)
6. [æ‰©å±•æ€§è¯´æ˜](#æ‰©å±•æ€§è¯´æ˜)

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

æœ¬ç³»ç»Ÿé‡‡ç”¨ **RAG + Agent** æ¶æ„ï¼Œå®ç°äº†ä» POC åˆ°ç”Ÿäº§çº§çš„å®Œæ•´å‡çº§ã€‚

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·å±‚ (User Layer)                      â”‚
â”‚  Streamlit UI / REST API / CLI                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent å±‚ (LangGraph)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  çŠ¶æ€æœº (State Machine)                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚Parse â”‚â†’â”‚Validateâ”‚â†’â”‚Executeâ”‚â†’â”‚Formatâ”‚â†’â”‚ END  â”‚      â”‚  â”‚
â”‚  â”‚  â”‚      â”‚  â”‚  SQL  â”‚  â”‚  SQL â”‚  â”‚Answerâ”‚  â”‚      â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â”‚              â†“ error   â†“ error                            â”‚  â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”                                        â”‚  â”‚
â”‚  â”‚           â”‚ Fix  â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚  â”‚
â”‚  â”‚           â”‚ SQL  â”‚ (è‡ªæˆ‘ä¿®æ­£)                              â”‚  â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”˜                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è¯­ä¹‰å±‚ (Semantic Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Tool 1:      â”‚  â”‚ Tool 2:      â”‚  â”‚ Tool 3:      â”‚         â”‚
â”‚  â”‚ è½¦è¾†ç»Ÿè®¡     â”‚  â”‚ å‘Šè­¦åˆ—è¡¨     â”‚  â”‚ åœ°ç‚¹è§£æ     â”‚  ...    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å®‰å…¨æŠ¤æ  (Security Layer)                      â”‚
â”‚  âœ“ SQL æ³¨å…¥é˜²æŠ¤  âœ“ ç™½åå•æ£€æŸ¥  âœ“ å‚æ•°æ¸…ç†                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å±‚ (Data Layer)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ SQLite       â”‚  â”‚ FAISS        â”‚  â”‚ Trace DB     â”‚         â”‚
â”‚  â”‚ (ç»“æ„åŒ–)     â”‚  â”‚ (å‘é‡ç´¢å¼•)   â”‚  â”‚ (ç›‘æ§æ—¥å¿—)   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© æ ¸å¿ƒç»„ä»¶

### 1. **LangGraph Agent** (`poc/qa/agent.py`)

**åŠŸèƒ½**ï¼šæ™ºèƒ½æŸ¥è¯¢çš„æ ¸å¿ƒå¤§è„‘ï¼ŒåŸºäºçŠ¶æ€æœºå®ç°è‡ªæˆ‘ä¿®æ­£ã€‚

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… **çŠ¶æ€æœºç¼–æ’**ï¼šå°†çº¿æ€§æµç¨‹æ”¹é€ ä¸ºå¯å¾ªç¯çš„çŠ¶æ€å›¾
- âœ… **è‡ªæˆ‘ä¿®æ­£**ï¼šSQL æ‰§è¡Œå¤±è´¥åè‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- âœ… **å¯è§†åŒ–**ï¼šæ”¯æŒå¯¼å‡ºçŠ¶æ€å›¾ï¼ˆMermaid æ ¼å¼ï¼‰
- âœ… **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šä¿ç•™å¯¹è¯å†å²ï¼Œæ”¯æŒå¤šè½®äº¤äº’

**çŠ¶æ€æµè½¬**ï¼š
```
START â†’ è§£æé—®é¢˜ â†’ éªŒè¯SQL â†’ æ‰§è¡ŒSQL â†’ æ ¼å¼åŒ–ç­”æ¡ˆ â†’ END
                    â†“ å¤±è´¥      â†“ å¤±è´¥
                  ä¿®å¤SQL â†â”€â”€â”€â”€â”€â”€â”˜
                    â†“ é‡è¯•
                  éªŒè¯SQL
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
from poc.qa.agent import create_agent
from poc.pipeline.utils import load_yaml

config = load_yaml("poc/config/poc.yaml")
agent = create_agent(config, max_retries=3)

result = agent.query("è¿‘7å¤©è½¦è¾†é—¯å…¥ç›‘æ§å‘Šè­¦æœ‰å¤šå°‘æ¡ï¼Ÿ")
print(result["answer"])
```

---

### 2. **å®‰å…¨æŠ¤æ ** (`poc/qa/guardrails.py`)

**åŠŸèƒ½**ï¼šé˜²æ­¢ SQL æ³¨å…¥å’Œå±é™©æ“ä½œã€‚

**é˜²æŠ¤æœºåˆ¶**ï¼š
- âœ… **å…³é”®è¯é»‘åå•**ï¼šæ‹¦æˆª DROPã€DELETEã€UPDATE ç­‰å±é™©æ“ä½œ
- âœ… **æ¨¡å¼æ£€æµ‹**ï¼šé˜²æ­¢æ³¨é‡Šæ³¨å…¥ï¼ˆ`--`ã€`/*`ï¼‰å’Œå †å æŸ¥è¯¢ï¼ˆ`;`ï¼‰
- âœ… **ç™½åå•éªŒè¯**ï¼šåªå…è®¸è®¿é—®æŒ‡å®šçš„è¡¨
- âœ… **å‚æ•°æ¸…ç†**ï¼šè‡ªåŠ¨æ¸…ç†å‚æ•°ä¸­çš„å±é™©å­—ç¬¦

**ç¤ºä¾‹**ï¼š
```python
from poc.qa.guardrails import SQLGuardrail, SQLSecurityError

try:
    SQLGuardrail.validate_sql("SELECT * FROM events WHERE id = 1; DROP TABLE users;")
except SQLSecurityError as e:
    print(f"æ‹¦æˆªå±é™©SQL: {e}")
    # è¾“å‡º: æ‹¦æˆªå±é™©SQL: ä¸å…è®¸æ‰§è¡Œå¤šæ¡ SQL è¯­å¥ï¼ˆå †å æŸ¥è¯¢ï¼‰
```

---

### 3. **ç›‘æ§ä¸è¿½è¸ª** (`poc/qa/trace.py`)

**åŠŸèƒ½**ï¼šè®°å½•æ¯æ¬¡æŸ¥è¯¢çš„å®Œæ•´é“¾è·¯ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œåˆ†æã€‚

**è¿½è¸ªå†…å®¹**ï¼š
- ğŸ“Š **æ‰§è¡Œæ­¥éª¤**ï¼šè§£æé—®é¢˜ â†’ ç”ŸæˆSQL â†’ æ‰§è¡Œ â†’ è¿”å›ç»“æœ
- â±ï¸ **æ€§èƒ½æŒ‡æ ‡**ï¼šæ¯ä¸ªæ­¥éª¤çš„è€—æ—¶ï¼ˆæ¯«ç§’çº§ï¼‰
- âŒ **é”™è¯¯ä¿¡æ¯**ï¼šå®Œæ•´çš„é”™è¯¯å †æ ˆå’Œé‡è¯•è®°å½•
- ğŸ“ˆ **ç»Ÿè®¡åˆ†æ**ï¼šæˆåŠŸç‡ã€å¹³å‡è€—æ—¶ã€æŒ‰æ„å›¾åˆ†ç»„

**æ•°æ®å­˜å‚¨**ï¼š
- SQLite æ•°æ®åº“ï¼ˆ`poc/data/traces.db`ï¼‰
- JSONL æ—¥å¿—æ–‡ä»¶ï¼ˆ`poc/logs/traces/trace_YYYYMMDD.jsonl`ï¼‰

**æŸ¥è¯¢ç¤ºä¾‹**ï¼š
```python
from poc.qa.trace import init_trace_manager, get_trace_manager

# åˆå§‹åŒ–
init_trace_manager(db_path="poc/data/traces.db", enable_file_log=True)

# æŸ¥è¯¢ç»Ÿè®¡
manager = get_trace_manager()
stats = manager.get_statistics()
print(f"æ€»æŸ¥è¯¢æ•°: {stats['total_queries']}")
print(f"æˆåŠŸç‡: {stats['success_count'] / stats['total_queries'] * 100:.2f}%")
print(f"å¹³å‡è€—æ—¶: {stats['avg_duration_ms']} ms")
```

---

### 4. **è¯­ä¹‰å±‚ Tool** (`poc/qa/tools.py`)

**åŠŸèƒ½**ï¼šå°†å¤æ‚çš„ SQL æŸ¥è¯¢å°è£…æˆè¯­ä¹‰åŒ–çš„å‡½æ•°ï¼Œéšè—åº•å±‚å®ç°ã€‚

**å†…ç½® Tools**ï¼š

| Tool åç§° | åŠŸèƒ½ | å‚æ•° |
|----------|------|------|
| `get_vehicle_count` | ç»Ÿè®¡è½¦è¾†æ•°é‡ | start_time, end_time, event_type, address |
| `get_alarm_list` | æŸ¥è¯¢å‘Šè­¦åˆ—è¡¨ | åŒä¸Š + limit, offset, order_by |
| `get_location_info` | åœ°ç‚¹è§£æ | location_keyword |
| `get_time_range_stats` | æ—¶é—´æ®µç»Ÿè®¡ | start_time, end_time, granularity |

**ä¼˜åŠ¿**ï¼š
- âœ… **ä¸šåŠ¡è¯­ä¹‰åŒ–**ï¼š`get_vehicle_count` æ¯” `SELECT COUNT(*) FROM ...` æ›´æ˜“ç†è§£
- âœ… **éšè—å¤æ‚æ€§**ï¼šå¤šè¡¨ Joinã€JSON è§£æç­‰é€»è¾‘å°è£…åœ¨ Tool å†…éƒ¨
- âœ… **å‚æ•°éªŒè¯**ï¼šè‡ªåŠ¨éªŒè¯å‚æ•°åˆæ³•æ€§
- âœ… **å¯æ‰©å±•**ï¼šè½»æ¾æ·»åŠ æ–° Tool

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
from poc.qa.tools import init_tool_registry, get_tool_registry

# åˆå§‹åŒ–
init_tool_registry(db_path="poc/data/metadata.db")

# æ‰§è¡Œ Tool
registry = get_tool_registry()
result = registry.execute_tool(
    "get_vehicle_count",
    start_time="2026-01-01 00:00:00",
    end_time="2026-01-07 23:59:59",
    event_type="è½¦è¾†é—¯å…¥ç›‘æ§å‘Šè­¦"
)

if result.success:
    print(f"è½¦è¾†æ•°é‡: {result.data['count']}")
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **Agent ç¼–æ’** | LangGraph | çŠ¶æ€æœºã€è‡ªæˆ‘ä¿®æ­£ |
| **LLM** | DeepSeek API | è‡ªç„¶è¯­è¨€ç†è§£ã€SQL ç”Ÿæˆ |
| **å‘é‡æ£€ç´¢** | FAISS + Sentence-Transformers | å¤šæ¨¡æ€ç›¸ä¼¼åº¦æœç´¢ |
| **ç»“æ„åŒ–æ•°æ®** | SQLite | å…ƒæ•°æ®å­˜å‚¨ |
| **å‰ç«¯** | Streamlit | æ¼”ç¤ºç•Œé¢ |
| **ç›‘æ§** | è‡ªç ” Trace ç³»ç»Ÿ | æŸ¥è¯¢è¿½è¸ªã€æ€§èƒ½åˆ†æ |
| **å®‰å…¨** | è‡ªç ” Guardrail | SQL æ³¨å…¥é˜²æŠ¤ |

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
```bash
export DEEPSEEK_API_KEY="your-api-key"
```

#### 3. ä½¿ç”¨ Agent è¿›è¡ŒæŸ¥è¯¢
```bash
# åŸºç¡€æŸ¥è¯¢
python -m poc.qa.agent_query --question "è¿‘7å¤©è½¦è¾†é—¯å…¥ç›‘æ§å‘Šè­¦æœ‰å¤šå°‘æ¡ï¼Ÿ"

# å¯ç”¨è¿½è¸ª
python -m poc.qa.agent_query --question "æŸ¥è¯¢æœ€è¿‘çš„10æ¡å‘Šè­¦" --enable-trace

# å¯è§†åŒ–çŠ¶æ€å›¾
python -m poc.qa.agent_query --question "æµ‹è¯•" --visualize
```

#### 4. å¯åŠ¨ Streamlit ç•Œé¢
```bash
streamlit run poc/app/app.py
```

---

### é«˜çº§ç”¨æ³•

#### è‡ªå®šä¹‰ Tool

```python
# åœ¨ poc/qa/tools.py ä¸­æ·»åŠ æ–° Tool
class GetCustomStatsTool(SemanticTool):
    name = "get_custom_stats"
    description = "è‡ªå®šä¹‰ç»Ÿè®¡é€»è¾‘"

    def execute(self, **kwargs) -> ToolResult:
        # å®ç°ä½ çš„é€»è¾‘
        sql = "SELECT ..."
        rows = self._execute_query(sql, [])
        return ToolResult(success=True, data=rows)

# æ³¨å†Œåˆ° Registry
registry = get_tool_registry()
registry.register(GetCustomStatsTool(db_path))
```

#### é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

```python
# åœ¨ä½ çš„ä¸šåŠ¡ä»£ç ä¸­
from poc.qa.agent import create_agent
from poc.pipeline.utils import load_yaml

config = load_yaml("poc/config/poc.yaml")
agent = create_agent(config)

# å¤„ç†ç”¨æˆ·è¯·æ±‚
def handle_user_query(question: str, user_id: str):
    result = agent.query(question, user_id=user_id)

    if result["status"] == "success":
        return result["answer"]
    else:
        return {"error": result["error"]}
```

---

## ğŸš€ æ¶æ„ä¼˜åŠ¿

### 1. **ç”Ÿäº§çº§å¯é æ€§**
- âœ… **è‡ªæˆ‘ä¿®æ­£**ï¼šSQL æ‰§è¡Œå¤±è´¥è‡ªåŠ¨é‡è¯•ï¼ŒæˆåŠŸç‡æå‡ 30%+
- âœ… **å®‰å…¨é˜²æŠ¤**ï¼šå¤šå±‚é˜²æŠ¤æœºåˆ¶ï¼Œæœç» SQL æ³¨å…¥
- âœ… **å®Œæ•´è¿½è¸ª**ï¼šæ¯æ¬¡æŸ¥è¯¢å¯æº¯æºï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜

### 2. **å¯ç»´æŠ¤æ€§**
- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šAgentã€Toolã€Guardrail å„å¸å…¶èŒ
- âœ… **è¯­ä¹‰å±‚æŠ½è±¡**ï¼šä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“è§£è€¦
- âœ… **å¯è§†åŒ–è°ƒè¯•**ï¼šçŠ¶æ€å›¾ä¸€ç›®äº†ç„¶

### 3. **å¯æ‰©å±•æ€§**
- âœ… **Tool æ’ä»¶åŒ–**ï¼šè½»æ¾æ·»åŠ æ–°åŠŸèƒ½
- âœ… **å¤šæ•°æ®æºæ”¯æŒ**ï¼šå¯æ¥å…¥ MySQLã€PostgreSQLã€å‘é‡æ•°æ®åº“
- âœ… **LLM å¯æ›¿æ¢**ï¼šæ”¯æŒ DeepSeekã€GPTã€Claude ç­‰

### 4. **æ€§èƒ½ä¼˜åŒ–**
- âœ… **æ¨¡å‹ç¼“å­˜**ï¼šCLIP æ¨¡å‹åªåŠ è½½ä¸€æ¬¡ï¼Œå“åº”æ—¶é—´ < 1s
- âœ… **æ··åˆæ£€ç´¢**ï¼šPre-filtering ç­–ç•¥ï¼Œé¿å…æ— æ•ˆè®¡ç®—
- âœ… **è¿æ¥æ± **ï¼šæ•°æ®åº“è¿æ¥å¤ç”¨ï¼ˆå¯æ‰©å±•ï¼‰

---

## ğŸ”® æ‰©å±•æ€§è¯´æ˜

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

1. **åœ°å€è§£æå¢å¼º**
   - å®ç° `ColumnValueSearcher`ï¼ˆå‘é‡æ£€ç´¢åœ°å€ï¼‰
   - è§£å†³"æ»¨å—ä¸œè·¯"æŸ¥è¯¢é—®é¢˜

2. **LLM é›†æˆ**
   - åœ¨ `fix_sql_node` ä¸­è°ƒç”¨ DeepSeek è¿›è¡Œæ™ºèƒ½ä¿®æ­£
   - æå‡å¤æ‚æŸ¥è¯¢çš„æˆåŠŸç‡

3. **è¯„ä¼°ä½“ç³»**
   - å»ºç«‹æµ‹è¯•é›†ï¼ˆ50+ é—®é¢˜ï¼‰
   - è‡ªåŠ¨åŒ–æµ‹è¯•å‡†ç¡®ç‡

### ä¸­æœŸå‡çº§ï¼ˆ1-2æœˆï¼‰

1. **å‘é‡æ•°æ®åº“è¿ç§»**
   - ä» FAISS è¿ç§»åˆ° Milvus/Qdrant
   - æ”¯æŒåŸç”Ÿçš„æ··åˆæŸ¥è¯¢ï¼ˆå‘é‡ + æ ‡é‡è¿‡æ»¤ï¼‰

2. **å¤šç§Ÿæˆ·æ”¯æŒ**
   - æ•°æ®éš”ç¦»
   - æƒé™ç®¡ç†

3. **API æœåŠ¡åŒ–**
   - FastAPI å°è£…
   - æ”¯æŒ RESTful è°ƒç”¨

### é•¿æœŸæ¼”è¿›ï¼ˆ3-6æœˆï¼‰

1. **çŸ¥è¯†åº“ç®¡ç†**
   - é›†æˆ RAGFlow çš„æ–‡æ¡£è§£æèƒ½åŠ›
   - æ”¯æŒ PDFã€Word ç­‰éç»“æ„åŒ–æ–‡æ¡£

2. **å®æ—¶æµå¤„ç†**
   - æ¥å…¥ Kafka/Flink
   - æ”¯æŒå®æ—¶å‘Šè­¦åˆ†æ

3. **å¤§æ¨¡å‹å¾®è°ƒ**
   - åŸºäºä¸šåŠ¡æ•°æ®å¾®è°ƒ Text2SQL æ¨¡å‹
   - æå‡é¢†åŸŸé€‚é…æ€§

---

## ğŸ“ è”ç³»ä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æäº¤ Issueã€‚

**æ¶æ„è®¾è®¡**: AI æ¶æ„å¸ˆ
**æŠ€æœ¯æ ˆ**: Python 3.8+, LangGraph, DeepSeek, FAISS, SQLite
**æœ€åæ›´æ–°**: 2026-02-04
