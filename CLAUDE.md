# Claude AI 编码规则

本文件记录了在与 Claude AI 协作开发过程中需要遵守的规则和最佳实践。

## 核心规则

### 1. 方案先行原则
**在编写任何代码之前，请先描述你的方案并等待批准。如果需求不明确，在编写任何代码之前务必提出澄清问题。**

- 先理解需求，再动手编码
- 方案需要清晰描述实现思路、涉及的文件、主要步骤
- 等待用户确认后再开始实施

### 2. 任务分解原则
**如果一项任务需要修改超过3个文件，请先停下来，将其分解成更小的任务。**

- 大任务容易出错，小任务更可控
- 每个子任务应该聚焦单一目标
- 分步实施，逐步验证

### 3. 测试驱动原则
**编写代码后，列出可能出现的问题，并建议相应的测试用例来覆盖这些问题。**

- 主动思考边界情况和异常场景
- 提供具体的测试步骤或测试代码
- 确保代码的健壮性

### 4. Bug 修复原则
**当发现 bug 时，首先要编写一个能够重现该 bug 的测试，然后不断修复它，直到测试通过为止。**

- 先重现问题，再修复问题
- 测试用例作为修复的验收标准
- 避免盲目修改代码

### 5. 持续改进原则
**每次我纠正你之后，就在 CLAUDE.md 文件中添加一条新规则，这样就不会再发生这种情况了。**

- 从错误中学习
- 规则会不断完善
- 保持文档更新

### 6. 代码提交原则
**完成代码修改后，必须立即自动提交到 Git，不要等用户提醒。**

- 每次修改代码后立即执行 `git add -A` 和 `git commit`
- 提交信息应清晰描述修改内容和原因
- 提交后执行 `git push` 推送到远程仓库
- 提交完成后，明确说明改动了哪些文件及具体修改内容

---

## 项目特定规则

### 数据库相关
- 在执行检索操作前，务必检查 LanceDB 数据目录是否存在
- 如果数据库不存在，应该给出明确的错误提示和解决方案

### 错误处理
- 所有数据库操作都应该有异常处理
- 错误信息应该清晰、可操作

---

*最后更新: 2026-02-06*
